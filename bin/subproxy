#!/usr/bin/env node

var subdomainProxy = require('../server');
var argv = require('optimist').argv;

if(argv.h) {
	console.log('usage: subproxy [options]');
	console.log('');
	console.log('starts a subproxy server using the specified command-line options');
	console.log('(if you run with localhost, make sure to modify your hosts file!)');
	console.log('');
	console.log('options:');
	console.log('	-r: host root (example, localhost)');
	console.log('	-p: port to listen on (example, 80) ');
	console.log('	-h: this help message');
} else {
	var port = argv.p || 80;
	var subProxyHost = argv.r || 'localhost';

	subdomainProxy.createServer(port, subProxyHost);
	console.log(subProxyHost + ' listening on port ' + port);
}